<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>QR Code Scanner</title>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <script src="https://unpkg.com/html5-qrcode@2.3.8/minified/html5-qrcode.min.js"></script>
</head>
<body>
    <h2>Scan a QR Code</h2>
    <div id="reader" style="width:300px;"></div>
<h2 class="num"></h2>
    <script>
      


// for scanning feature 

function onScanSuccess(decodedText, decodedResult) {
  console.log(`Barcode Scanned: ${decodedText}`);
  console.log('Scan result:', decodedResult);
  checkUPC(decodedText);
}

function onScanError(error) {
  console.warn(`Scan Error: ${error}`);
}

// Initialize scanner
let html5QrcodeScanner = new Html5QrcodeScanner(
  "reader",
  {
    fps: 10,
    qrbox: 250,
    supportedFormats: [
      Html5QrcodeSupportedFormats.EAN_13,
      Html5QrcodeSupportedFormats.EAN_8,
      Html5QrcodeSupportedFormats.UPC_A,
      Html5QrcodeSupportedFormats.UPC_E,
      Html5QrcodeSupportedFormats.CODE_39,
      Html5QrcodeSupportedFormats.CODE_128
    ]
  }
);
html5QrcodeScanner.render(onScanSuccess, onScanError);
async function checkUPC(openUPC) {
  const url = `https://world.openfoodfacts.org/api/v0/product/${openUPC}.json`;
 
  try {
    const response = await fetch(url);
    const data = await response.json();

    // Check if product data was returned
    if (data.status === 1 && data.product) {
      const product = data.product;
      console.log('Product Details:', product);
    } else {
      console.log('No product found for this UPC.');
      alert('No product found for this UPC.');
    }
  } catch (error) {
    console.error('Error fetching data:', error);
    alert('Error fetching data. Please try again.');
  }
}



    </script>
</body>
</html>